%
\chapter{Fundamentals}\label{cha:Fundamentals}
%
%Eine wissenschaftliche Abschlussarbeit kann im Allgemeinen in die folgenden 4 Phasen gegliedert werden.
%
\section*{2.1.Properties of Truck at Carolo-Cup}
\label{sec:Properties of Truck at Carolo-Cup}
\addcontentsline{toc}{section}{2.1.Properties of Truck at Carolo-Cup}
%

The Carolo-Cup is an annual competition at the Technical University of Braunschweig 
which are attended by student. Every year the truck and some properties of the 
competition is changing. For example, in the competitions until 2017 there was no 
traffic sign but from 2017 there are also some traffic signs, speed limit zones, 
blocked areas and crosswalks with pedestrian. Because of this reason, in the 
competitions until 2017, there was only one way to understand who has the right of way. 
If there is a stop line in the way which in front of intersection, it means, the car 
has to wait until the intersection is free. In the competitions from 2017, the 
intersections are in different parts: They are 'Intersections with stop lines', 
'Intersections with give-way lines', 'Intersections with priority to right', 
'Enforced crossing direction - give-way condition', 'Enforced crossing direction - 
right of way condition'. Except 'Intersections with priority to right', they all have 
traffic signs, which signs who has priority. If there is a no traffic sign, it means,
right side always have priority.

\begin{figure}
	\centering
	\hspace*{0cm}   
	\includegraphics[width=150mm,scale=1]{./Bilder/Intersections.png}
	\caption{Left: Markings for sharp turns at Carolo-Cup.
Right: Intersections with stop lines at Carolo-Cup}
\end{figure}


%
\section*{2.2. Inverse Perspective Mapping}\label{sec:Inverse Perspective Mapping}
\addcontentsline{toc}{section}{2.2. Inverse Perspective Mapping}
%
Inverse Perspective Mapping(IPM) is an algorithm which obtain accurate bird's-eye view images from the sequential 
of forward looking cameras. At IPM algorithm, each image pixel is re-mapped, and a new array of pixels is created 
where the lines in perspective are transformed into straight lines and objects are distorted. IPM is one of the 
most used methods at lane detection. At lane detection, IPM ensures to show the lanes vertical and parallel to 
each other. On the other hand, because of re-mapping of pixels, IPM is a computationally expensive method. Because 
of this reason, in this master thesis, in some methods, except to remap the all pixels of images, just the pixels,
which are relevant to lane and accordingly the fitted curve were remapped. Thanks to this, in some methods, so many 
time of computing was saved.

For using IPM method, the intrinsic and extrinsic parameters of camera are necessary to process images for coordinate 
transformation and calibration. 

\begin{itemize}
 \item \textbf{Intrinsic Parameters :} Instrinsic parameters include are specific to a camera. It includes information
of the focal length ($f_x$, $f_y$) and optical centers ($c_x$, $c_y$). It is also called camera matrix. It depends on 
the camera only, so once calibrated, it can be stored for future purposes. It is expressed as a 3x3 matrix: 

 \begin{center}
  camera matrix =  $
 \begin{bmatrix} 
f_x & 0 & c_x \\
0 & f_y & c_y \\
0 & 0 & 1 \\
\end{bmatrix}
$  \end{center}

 \item \textbf{Extrinsic Parameters :} Extrinsic parameters are relevant with the camera position. The parameters are H 
 and $\theta$. H is the distance between the camera and ground. $\theta$ is the camera tilt angle. 
 
  \end{itemize}
  
 \begin{figure}
	\centering
	\hspace*{0cm}   
	\includegraphics[width=150mm,scale=1]{./Bilder/Related_positions_of_the_camera.png}
	\caption{Related Positions of the Camera \cite{IPM}}
\end{figure}
 
 As seen at Abbildung 2.2, the camera on the car has field of view 2(FOV2) at its real position of camera but in this 
 case, the view is not bird-eye view so if the same FOV want to be seen from bird-eye view, IPM will virtually change
 the position to Virtual position 2 of camera. In this case, although the camera is at its real position, it will look
 like that it is at the virtual position 2. For that, the image coordinates must be also changed. Below, steps of IPM 
 calculations will be from the paper of \cite{IPM} described.
 
 In the formula, original image coordinates will be defined as (x,y), the destination image coordinates will be 
 defined as ($x^*$,$y^*$), the distance between ground and camera will be defines as H, the focal length of camera 
 will be defines as f and the tilt angle of camera will be defined as $\theta$.
 
\begin{center}
 $x^* = H \frac{x sin \theta + f cos \theta}{-y cos \theta + f sin \theta}$ ;
 $y^* = H \frac{y sin \theta + f cos \theta}{-y cos \theta + f sin \theta}$ 
\end{center}

In this equation , the transformed component values of $x^*$ and $y^*$ may be less than or equal to zero. Because of 
this reason, a constant d is defined as $
\begin{vmatrix}
H(sin \theta + cos \theta)/(f sin \theta - cos \theta) 
\end{vmatrix}
$  + 1. This means that the coordinate point in the original source image has been mapped into the point of  the 
destination image coordinate system. Below there is the proposed equation :
 
 \begin{center}
 $x^* = H \frac{x sin \theta + f cos \theta}{-y cos \theta + f sin \theta}$ + d ,
 $y^* = H \frac{y sin \theta + f cos \theta}{-y cos \theta + f sin \theta}$ + d ,
 where d = 
 $\begin{vmatrix}
 \frac{H(sin \theta + f cos \theta)}{f sin \theta - cos \theta}
 \end{vmatrix}$ + 1
\end{center}

\begin{figure}
	\centering
	\hspace*{0cm}   
	\includegraphics[width=150mm,scale=1]{./Bilder/Procedures_of_IPM.png}
	\caption{Procedures of IPM \cite{IPM}}
\end{figure}

%
\section*{2.3. Edge Detection}\label{sec:Edge Detection}
\addcontentsline{toc}{section}{2.3. Edge Detection}
%
Edge detectors are essential parts of most of computer vision systems. Edge detectors decrease dramatically the 
amount of data to be processed and extract the useful part of images. They work by detecting discontinuities in 
brightness. In this project, the edge detector was used, the lanes to detect and prevent unnecessary information 
from images.  

Well known edge detectors are :

\begin{itemize}
 \item Sobel-Operator
 \item Canny Edge Detector
 \item Laplacian Edge Detector
 \item Prewitt-Operator
 \end{itemize}

According to \cite{Machine_Vision},there are three steps at edge detection algoritm. They are :
\begin{itemize}
 \item \textbf{Filtering : } It is often utilized to improve the functioning of an edge detector against noise. 
 The more filtering is applied, however, the greater the loss of edge strength.
 
 \item \textbf{Enhancement : } To be able to better detect edges, changes in the intensity in the area 
 surrounding a point must be determined. Pixels in which a significant change in intensity occurs are 
 emphasized by enhancement, which is usually applied by calculating the gradient magnitude.
  
 \item \textbf{Detection : } Though many points in an image have a nonzero value for the gradient, not all of 
 these points are actually edges. Because only points with strong edge content are desired, a method must be 
 applied to determine which points are actual edge points. Thresholding is often utilized to do so.
 
\end{itemize}

\subsection*{2.3.1. Sobel Operator}\label{sec:Sobel Operator}
\addcontentsline{toc}{subsection}{2.3.1. Sobel Operator}

%
\section*{2.4. Hough-Transformation}\label{sec:Hough - Transformation}
\addcontentsline{toc}{section}{2.4. Hough - Transformation}
%

%
\subsection*{2.4.1. Standart Hough - Transformation}\label{sec:Standart Hough - Transformation}
\addcontentsline{toc}{subsection}{2.4.1. Standart Hough - Transformation}
%


%
\subsection*{2.4.2. Probabilistic Hough - Transformation}\label{sec:Probabilistic Hough - Transformation}
\addcontentsline{toc}{subsection}{2.4.2. Probabilistic Hough - Transformation}
%


\begin{itemize}
 \item dient zur Lösung der Problemstellung
 \item kreativste und anstrengendste Phase der Arbeit
 \item Verwendung professioneller Hilfsmittel (Programme wie Matlab oder Mathematica etc.)
 \item Treffen wenn Bedarf besteht, keine Regelmäßigkeit mehr
\end{itemize}


%
\section*{2.5. Curve Fitting}\label{sec:Curve Fitting}
\addcontentsline{toc}{section}{2.5. Curve Fitting}
%
\begin{itemize}
 \item dient der Reorganisation der Arbeit
 \item sämtliche Ergebnisse werden festgehalten
 \item Strukturierung und Gliederung der Ergebnisse, so dass die nächste Phase (Schreiben) gut durchgeführt werden kann
 \item wenige, längere Treffen zur Ergebnisbesprechung mit dem Betreuer
\end{itemize}


%
\subsection*{Ergebnissicherung}\label{sec:Ergebnissicherung}
\addcontentsline{toc}{subsection}{Ergebnissicherung}
%
\begin{itemize}
 \item alles zusammentragen was erreicht wurde $\rightarrow$ guter Überblick notwendig (S.O.)
 \item auch Programmcode ist ein Ergebnis $\rightarrow$ verständlich kommentieren (Englisch)
 \item auf  Wiederverwendbarkeit von Grafiken achten (Linienstärke, Farbe, Beschriftung, \ldots)
 \item nur noch kleine Änderungen durchführen (z.B. Parametereinstellungen)
\end{itemize}
\emph{Ergebnisse sollten für sich sprechen und für jeden verständlich sein (ohne Erklärung)}


%
\section*{4. Phase: Dokumentation und Präsentation}\label{sec:Dokumentation}
\addcontentsline{toc}{section}{4. Phase: Dokumentation und Präsentation}
%
\begin{itemize}
 \item Verfassen der Arbeit und erstellen der Präsentation
 \item letzte Verfeinerungen an den Ergebnissen (falls notwendig)
 \item schwierigste Phase der Arbeit
 \item regelmäßige Treffen zur Korrektur des Textes / der Präsentation
\end{itemize}

\newpage
%
\subsection*{Wissenschaftliches Schreiben}\label{sec:Wissenschaftliches Schreiben}
\addcontentsline{toc}{subsection}{Wissenschaftliches Schreiben}
%
\begin{itemize}
 \item nicht am Layout der Arbeit aufhalten $\rightarrow$ Vorlage verwenden
 \item sehr aufwendiger Prozess von Schreiben - Verbessern - neu Schreiben - \ldots
 \item Aufwand darf nicht unterschätzt werden (Richtwert: 1-2 Seiten / Tag)
 \item einfach erst einmal aufschreiben -  korrigiert wird dann später
 \item Struktur einer wissenschaftlichen Arbeit ist vorgegeben
 \begin{itemize}
    \item \textbf{Titelseite} mit Art der Arbeit, Titel, Namen des Autors sowie Abgabedatum.
    \item \textbf{Aufgabenstellung} wird vom Betreuer der Arbeit zur Verfügung
      gestellt.
    \item \textbf{Erklärung} zur Selbständigkeit. Der Text ist vorgegeben und wird bei Verwendung der Vorlage automatisch erzeugt.
    \item \textbf{Kurzfassung} der Arbeit.
      Der Umfang soll so bemessen sein, dass die englische Version
      (\textbf{Abstract}) auf die gleiche Seite passt.
    \item \textbf{Inhaltsverzeichnis} wird in \LaTeX{} durch \verb|\tableofcontents| automatisch
      erzeugt.
    \item \textbf{Symbole und Abkürzungen}. Dieses Verzeichnis erstellt man am Besten von Hand. Die Einteilung in lateinische und griechische Symbole und Formelzeichen kann nach Bedarf geändert werden (zum Beispiel nach Kapiteln oder Konzepten) oder ganz weggelassen werden
    \item \textbf{Hauptteil der Arbeit}, in einzelne Kapitel und Abschnitte unterteilen.
    \item \textbf{Anhang}. Hier können Abschnitte stehen, die beim Lesen der Arbeit
      stören würden, \zB\ Programmcode, technische Daten oder lange mathematische
      Beweise.
    \item \textbf{Literaturverzeichnis} wird entweder von Hand erstellt oder automatisch generiert (in \LaTeX{} \zB mit.
      \textsc{Bib}\TeX )
    \item \label{itm:Ordner} \textbf{Zusätzliches Material} wie \zB\ der
      vollständige Programmcode eines Software-Projekts gehört nicht in die Arbeit,
      sondern kann in einem separaten Ordner abgelegt werden.
 \end{itemize}
\end{itemize}
$P_\text{rägnanz}\; O_\text{rdnung}\; E_\text{infachheit}\; M_\text{otivation}$ (einfache, kurze, strukturierte und anregende Sätze)


%
\subsection*{Verteidigung und Präsentation}\label{sec:Verteidigung}
\addcontentsline{toc}{subsection}{Verteidigung und Präsentation}
%
\begin{itemize}
 \item Inhalt der Arbeit auf ca. 10 wesentliche Punkte reduzieren
 \item je Punkt eine Folie maximal zwei
 \item je Folie 1-2 min Gesprächszeit
 \item Struktur der Präsentation:
 \begin{itemize}
   \item Motivation / Einleitung (Aufgabenstellung)
   \item Grundlagen
   \item Lösungsweg
   \item Ergebnisse
   \item Zusammenfassung (und Ausblick)
 \end{itemize}
 \item komplexe Sachverhalte durch Abbildungen verdeutlichen
 \item nur Stichpunkte schreiben, keine ganzen Sätze
 \item klare, einfach nachvollziehbare Notation (z.B. bei Variablen) verwenden
 \item mehrmaliges Üben des Vortrags (z.B. vor dem Spiegel, vor der Familie, \ldots)
\end{itemize}
\emph{nichts weglassen was auf einer Folie steht, gerne zusätzliche Dinge erwähnen}



%
\section*{Organisatorisches}\label{sec:Organisatorisches}
\addcontentsline{toc}{section}{Organisatorisches}
%
\begin{itemize}
 \item Bewertung
 \begin{itemize}
   \item Arbeitsstil: 40\% - Selbständigkeit, Verständnis, Kreativität, Fleiß, Zusammenarbeit mit Betreuer, Systematik
   \item Ergebnisse: 20\% - Qualität, Nutzbarkeit, Innovations-, Erfüllungsgrad
   \item Ausarbeitung: 30\% - Aufbau, äußere Form, Sprache, Grundlagen, Vollständigkeit
   \item Vortrag: 10\% - Inhalt, Stil, Folien, Vorführung, Diskussion
 \end{itemize}
 \item jeder Studierende sollte an mindestens einem Regelungstechnischen Seminar teilnehmen
 \item Abgabetermin ist ein fixer Termin $\rightarrow$ Prüfungsleistung (Durchfallen möglich)
 \item jeder Studierende erhält auf Wunsch einen eigenen Account für unsere Rechner (Passwort legt Admin fest)
 \item zur Erstellung der Ausarbeitung und der Präsentation wird die Verwendung des Textsatzprogramms LaTeX empfohlen, das Template für die Ausarbeitung erhaltet Ihr vom Betreuer
\end{itemize}


%
\section*{Allgemeines zu Hilfsmitteln bei der Erstellung und Bearbeitung}\label{sec:Allgemeines}
\addcontentsline{toc}{section}{Allgemeines zu Hilfsmitteln bei der Erstellung und Bearbeitung}
%
\begin{itemize}
 \item es gibt viele Bücher die bei der Erstellung von wissenschaftlichen Arbeiten helfen
 \item viele verwendete Programme bieten ausführliche Hilfen an (z.B. Matlab, Mathematica)
 \item bei Problemen immer zuerst in der Hilfe schauen, dann "googlen", dann Betreuer fragen
\end{itemize}


%
\subsection*{Empfohlene Programme}\label{sec:Empfohlene Programme}
\addcontentsline{toc}{subsection}{Empfohlene Programme}
%
\begin{itemize}
 \item Literaturdatenbank $\rightarrow$ JabRef (http://jabref.sourceforge.net/)
 \item Ausarbeitung und Präsentation $\rightarrow$ \LaTeX / PowerPoint
 \item Simulation und Regelungstechnik $\rightarrow$ Matlab/Simulink
 \item symbolische und numerische Berechnungen $\rightarrow$ Mathematica
 \item Plots $\rightarrow$ \texttt{pgfplots}
 \item Blockschaltbilder $\rightarrow$ \texttt{TikZ}
\end{itemize}

